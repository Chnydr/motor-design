
%In this project design of simple single phase power transformer will be studied
clear
clc
%To specify parameters of the transformer
Qout= 1e6; %power rating in VA
f= 50; %nominal frequency in Hz
Vin= 34500; %input voltage in V
Vout= 400; %output voltage in V

%To make necessary assumption related with working conditions
Bm= 1.35 %magnetic flux density in Wb/m2
J= 3; %current density in A/mm2
copper_density= 8960; %copper density in kg/m3
copper_resistivity = 1.7e-8; %Ohm.m
fill_factor= 0.6; %fill factor
core_loss= 1; %core loss for grain oriented M140-35s steel @1.5T in W/kg;
L_leakage= 0.04; %leakage inductance in pu
mu_core_initial=700;%initial relative permeability of the core
mu_air=4*pi*10^-7; %permeability of air
mu=mu_core_initial*mu_air;
core_material_cost=3; %core material cost in $/kg
copper_cost=10; %copper cost in $/kg
stacking_factor=0.96;
core_density=7650 %core density in kg/m3

%Defining number of turns that will be optimized
c_op=0.01;
N1=(Vin)*c_op
N2=N1*Vout/Vin


%Q=2.22*f*Bm*J*Kw*Aw*Ai*e-3 %output power equation in kVA
Ai=Vin/(4.44*f*N1*Bm); %net core area in mm2
H = Bm/mu; %H in A/m
Iout=Qout/Vout; %in A
Iin=N2/N1*Iout; %in A
mean_length=N1*Iin/H; %in m
core_volume = Ai*mean_length; %in m^3
core_mass = core_density*core_volume %in kg

coil_in_area=Iin/J/10^6; %in m^2
coil_out_area=Iout/J/10^6; %in m^2
width_core=sqrt(Ai);

coil_in_length=4*width_core*N1;
coil_out_length=4*width_core*N2;

copper_in_volume=coil_in_length*coil_in_area;
copper_out_volume= coil_out_length*coil_out_area;

copper_volume = copper_in_volume + copper_out_volume;
copper_mass = copper_volume * copper_density

Rin = copper_resistivity * coil_in_length/coil_in_area
Rout = copper_resistivity * coil_out_length/coil_out_area
Rcore = mean_length/(mu*Ai);

Lm = N1^2/Rcore

P_core = core_loss* core_mass
P_copper = Iin^2*Rin + Iout^2*Rout

Efficiency = Qout/(Qout+P_core+P_copper)*100

mass_total = copper_mass + core_mass;

cost_total = core_material_cost*core_mass + copper_cost * copper_mass 



